<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>æ­Œè©åŠ ç©ºæ ¼ï½œLouisLiao Piano é‹¼ç´ç·¨æ›²</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Noto Sans TC", sans-serif; }

    body {
      margin: 0;
      background: linear-gradient(135deg, #e8d9c5, #f4ede4);
      background-attachment: fixed;
    }

    .wrap {
      max-width: 1200px;
      padding: 32px 16px 50px;
      margin: auto;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* ----------------------------------------------------
       ğŸŒŸ LOGOï¼šæŸ”éœ§æŒ‰éˆ• + é»æ“Šå¯å›å®˜ç¶²
    ----------------------------------------------------- */
    .logo-btn {
      display: inline-block;
      padding: 10px 22px;
      font-size: 22px;
      font-weight: 700;
      color: #5a4635;
      background: #fff7ec;
      border-radius: 14px;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
      transition: 0.25s;
    }
    .logo-btn:hover {
      background: #fff1dd;
      box-shadow: 0 6px 20px rgba(0,0,0,0.18);
      transform: translateY(-2px);
    }

    .sub {
      color: #6e5b4a;
      font-size: 15px;
      line-height: 1.7;
    }

    .panel {
      margin-top: 8px;
      display: grid;
      grid-template-columns: 1.3fr auto 1.3fr;
      gap: 24px;
    }

    textarea {
      width: 100%;
      min-height: 480px;
      padding: 20px 22px;
      border-radius: 20px;
      border: none;
      background: #ffffffcc;
      box-shadow: 0 6px 20px rgba(0,0,0,0.10);
      font-size: 18px;
      line-height: 1.8;
      outline: none;
      resize: vertical;
    }

    /* ----------------------------------------------------
       ğŸŒŸ æŸ”å’Œå¥¶æ²¹ç³»æŒ‰éˆ•ï¼ˆæº«æŸ”ã€éœ§é¢ã€åœ“æ½¤ï¼‰
    ----------------------------------------------------- */
    .btn-col {
      display: flex;
      flex-direction: column;
      gap: 18px;
      align-items: center;
    }

    .btn {
      width: 160px;
      padding: 14px 28px;
      font-size: 20px;
      border: none;
      border-radius: 40px;
      font-weight: 700;
      color: #5a4635;
      background: linear-gradient(135deg, #fff4e3, #f1dbc4);
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
      cursor: pointer;
      transition: 0.22s ease;
    }

    .btn:hover {
      background: linear-gradient(135deg, #ffe9cf, #efd3b5);
      box-shadow: 0 6px 18px rgba(0,0,0,0.18);
      transform: translateY(-2px);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 4px 12px rgba(0,0,0,0.10);
    }

    @media (max-width: 900px) {
      .panel { grid-template-columns: 1fr; }
      textarea { min-height: 280px; }
      .btn-col { flex-direction: row; flex-wrap: wrap; }
      .btn { flex: 1 1 42%; }
    }
  </style>
</head>

<body>
<div class="wrap">

  <!-- â­ é»æ“Šå›å®˜ç¶²çš„ LOGO -->
  <a href="https://louisliaopiano.com/" target="_blank" class="logo-btn">
    LouisLiao Piano é‹¼ç´ç·¨æ›²
  </a>

  <!-- è¦å‰‡æ–‡å­— -->
  <div class="sub">
    âœ” ä¸­æ–‡ï¼šç§»é™¤æ¨™é»ï¼Œåªä¿ç•™å­—èˆ‡ç©ºç™½ï¼Œä¸¦è‡ªå‹•ã€Œä¸€å­—ä¸€ç©ºæ ¼ã€æ–¹ä¾¿  Sibelius è¼¸å…¥ã€‚<br>
    âœ” è‹±æ–‡ï¼šç§»é™¤æ¨™é»ï¼ˆä¿ç•™ç©ºç™½èˆ‡æ’‡è™Ÿ 'ï¼‰ï¼Œä¸æ‹†å–®å­—ï¼Œç”±  Sibelius è‡ªå·±æ’ã€‚
  </div>

  <div class="panel">

    <!-- å·¦ -->
    <textarea id="inputLyrics" placeholder="åœ¨é€™è£¡è²¼ä¸ŠåŸå§‹æ­Œè©ï¼ˆç°¡ç¹ / è‹±æ–‡çš†å¯ï¼‰"></textarea>

    <!-- æŒ‰éˆ•å€å¡Š -->
    <div class="btn-col">
      <button class="btn" id="btnPaste">è²¼ä¸Š</button>
      <button class="btn" id="btnConvert">è½‰æ›</button>
      <button class="btn" id="btnCopy">è¤‡è£½</button>
      <button class="btn" id="btnClear">æ¸…ç©º</button>
      <button class="btn" id="btnOneClick">ä¸€éµå®Œæˆ</button>
    </div>

    <!-- å³ -->
    <textarea id="outputLyrics" placeholder="é€™è£¡æœƒé¡¯ç¤ºè™•ç†å¾Œçš„æ­Œè©â€¦" readonly></textarea>

  </div>
</div>

<script>
  function normalizeEnglishApostrophes(text) {
    return text.replace(/[â€™â€˜Ê¼Â´Ê»ï¼‡]/g, "'");
  }

  function removeAllPunctuation(text) {
    return text.replace(/[^a-zA-Z0-9\u4E00-\u9FFF\s']/g, "");
  }

  function addSpacesForChineseOnly(text) {
    const isCJK = ch => /[\u3400-\u4DBF\u4E00-\u9FFF]/.test(ch);
    return text
      .split("\n")
      .map(line => {
        const chars = [...line];
        let out = "";
        for (let i = 0; i < chars.length; i++) {
          const curr = chars[i];
          const next = chars[i + 1];
          out += curr;
          if (!next) continue;
          if (curr === " " || next === " ") continue;
          if (isCJK(curr) && isCJK(next)) out += " ";
        }
        return out;
      })
      .join("\n");
  }

  function processLyrics(text) {
    let t = text;
    t = normalizeEnglishApostrophes(t);
    t = removeAllPunctuation(t);
    t = addSpacesForChineseOnly(t);
    return t;
  }

  document.addEventListener("DOMContentLoaded", () => {
    const inputEl = document.getElementById("inputLyrics");
    const outputEl = document.getElementById("outputLyrics");

    document.getElementById("btnConvert").addEventListener("click", () => {
      outputEl.value = processLyrics(inputEl.value);
    });

    document.getElementById("btnClear").addEventListener("click", () => {
      inputEl.value = "";
      outputEl.value = "";
    });

    document.getElementById("btnPaste").addEventListener("click", async () => {
      try {
        inputEl.value = await navigator.clipboard.readText();
      } catch (err) {
        alert("âš ï¸ ç„¡æ³•è®€å–å‰ªè²¼ç°¿ï¼Œè«‹æ‰‹å‹•è²¼ä¸Šã€‚");
      }
    });

    document.getElementById("btnCopy").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(outputEl.value);
      } catch {}
      alert("å·²è¤‡è£½ï¼");
    });

    document.getElementById("btnOneClick").addEventListener("click", async () => {
      try {
        const text = await navigator.clipboard.readText();
        inputEl.value = text;
        const processed = processLyrics(text);
        outputEl.value = processed;
        await navigator.clipboard.writeText(processed);
        alert("âœ” å·²å®Œæˆï¼šè²¼ä¸Š â†’ è™•ç† â†’ è¤‡è£½ï¼");
      } catch {
        alert("âš ï¸ ç„¡æ³•ä¸€éµå®Œæˆï¼Œè«‹åˆ†æ­¥æ“ä½œã€‚");
      }
    });
  });
</script>

</body>
</html>
